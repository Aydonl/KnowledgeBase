nginx https配置
upstream配置
upstream beian {
  server 192.168.100.209:8096;
}

nginx.conf http配置段添加：
ssl_session_cache    shared:SSL:10m;
ssl_session_timeout  10m;


站点 配置添加如下：
ssl.conf
keepalive_timeout   70;
ssl on;
ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;
ssl_ciphers RC4:HIGH:!aNULL:!MD5;
ssl_prefer_server_ciphers on;
ssl_certificate      conf.d/kuaiyun.cn-ov.crt;
ssl_certificate_key  conf.d/kuaiyun.cn-ov.key;

反向代理配置如下：
proxy.conf
proxy_redirect    off;
proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;
proxy_set_header  X-Real-IP  $remote_addr;
proxy_set_header  Host $host;
proxy_set_header X-Forwarded-Proto $scheme;
站点配置如下：
vhost.conf
server {
    listen       443;
    listen  [2400:a480:aaaa:100:1:1:1:11]:443;
    server_name  csgainet.com www.csgainet.com;
    include conf.d/ssl-ov.conf;
    access_log  /var/log/nginx/csssl8access.log  main;
    error_log  /var/log/nginx/csssl8error.log;
    if ( $http_user_agent ~* "YisouSpider") {
      return 403;
    }
    location / {
      proxy_pass  http://cs;
      include conf.d/proxy.conf;
    }
}


tomcat按需添加如下配置：
server.xml  engine配置段
<Valve className="org.apache.catalina.valves.RemoteIpValve" remoteIpHeader="X-Forwarded-For" protocolHeader="X-Forwarded-Proto" protocolHeaderHttpsValue="https"/>

